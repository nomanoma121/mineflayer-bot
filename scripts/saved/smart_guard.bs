# Smart Guard Script  
# Author: system
# Description: ã‚¹ãƒãƒ¼ãƒˆè­¦å‚™ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - æ™‚é–“ã¨å‘¨è¾ºçŠ¶æ³ã«å¿œã˜ã¦è­¦å‚™è¡Œå‹•

say "ğŸ›¡ï¸ ã‚¹ãƒãƒ¼ãƒˆè­¦å‚™ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹"

var base_x = bot_x
var base_y = bot_y  
var base_z = bot_z
var patrol_radius = 8

say "ğŸ  æ‹ ç‚¹è¨­å®š: (" + base_x + ", " + base_y + ", " + base_z + ")"

repeat 30 {
  var patrol_count = _loop_index + 1
  say "== è­¦å‚™ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ« " + patrol_count + "/30 =="
  
  # æ™‚é–“ã«å¿œã˜ãŸè¡Œå‹•å¤‰æ›´
  if is_night {
    say "ğŸŒ™ å¤œé–“è­¦å‚™ãƒ¢ãƒ¼ãƒ‰"
    set patrol_radius = 6  # å¤œã¯ç¯„å›²ã‚’ç‹­ã‚ã‚‹
    
    if nearby_mobs_count > 0 {
      say "âš ï¸ å¤œé–“ã«Mob " + nearby_mobs_count + "ä½“ã‚’ç™ºè¦‹ï¼"
      if nearby_mobs_count > 2 {
        say "ğŸš¨ å¤šæ•°ã®Mobç™ºè¦‹ - æ‹ ç‚¹ã«å¾Œé€€ã—ã¾ã™"
        goto base_x base_y base_z
        wait 2
        continue  # æ¬¡ã®ãƒ«ãƒ¼ãƒ—ã¸
      }
    }
  } else {
    say "â˜€ï¸ æ˜¼é–“è­¦å‚™ãƒ¢ãƒ¼ãƒ‰"  
    set patrol_radius = 10  # æ˜¼ã¯ç¯„å›²ã‚’åºƒã’ã‚‹
  }
  
  # å¤©æ°—ã«ã‚ˆã‚‹è¡Œå‹•èª¿æ•´
  if weather == "thunder" {
    say "â›ˆï¸ é›·é›¨ã®ãŸã‚å±‹å†…å¾…æ©Ÿ"
    goto base_x base_y base_z
    wait 5
    continue
  }
  
  # ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ï¼ˆæ–¹è§’ã«åŸºã¥ãï¼‰
  var angle = (_loop_index % 4) * 90  # 0, 90, 180, 270åº¦
  var offset_x = 0
  var offset_z = 0
  
  if angle == 0 {    # åŒ—
    set offset_z = -patrol_radius
    say "ğŸ§­ åŒ—æ–¹å‘ã¸ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«"
  } else {
    if angle == 90 {  # æ±
      set offset_x = patrol_radius
      say "ğŸ§­ æ±æ–¹å‘ã¸ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«"
    } else {
      if angle == 180 { # å—
        set offset_z = patrol_radius
        say "ğŸ§­ å—æ–¹å‘ã¸ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«"
      } else {           # è¥¿
        set offset_x = -patrol_radius
        say "ğŸ§­ è¥¿æ–¹å‘ã¸ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«"
      }
    }
  }
  
  var target_x = base_x + offset_x
  var target_z = base_z + offset_z
  
  # ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆã¸ç§»å‹•
  goto target_x base_y target_z
  wait 2
  
  # å‘¨è¾ºãƒã‚§ãƒƒã‚¯
  if nearby_players_count > 0 {
    say "ğŸ‘¥ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ " + nearby_players_count + "äººã‚’ç¢ºèª"
  }
  
  if nearby_mobs_count > 0 {
    say "ğŸ‘¹ Mob " + nearby_mobs_count + "ä½“ã‚’ç™ºè¦‹"
    
    # ä½“åŠ›ãƒã‚§ãƒƒã‚¯
    if bot_health < 15 {
      say "âš ï¸ ä½“åŠ›ä¸è¶³ - æˆ¦é—˜å›é¿ã—ã¾ã™"
    } else {
      say "âš”ï¸ è­¦å‚™ã®ãŸã‚æ”»æ’ƒæ…‹å‹¢"
      # å®Ÿéš›ã®æ”»æ’ƒã‚³ãƒãƒ³ãƒ‰ã¯çŠ¶æ³ã«å¿œã˜ã¦
    }
  }
  
  # æ‹ ç‚¹ã«æˆ»ã‚‹
  say "ğŸ  æ‹ ç‚¹ã«å¸°é‚„"
  goto base_x base_y base_z
  wait 1
  
  # æ¬¡ã®ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«ã¾ã§ã®å¾…æ©Ÿæ™‚é–“ã‚’æ™‚é–“ã«å¿œã˜ã¦èª¿æ•´
  if is_night {
    wait 4  # å¤œã¯é »ç¹ã«ãƒã‚§ãƒƒã‚¯
  } else {
    wait 6  # æ˜¼ã¯ä½™è£•ã‚’æŒã¤
  }
}

say "ğŸ¯ è­¦å‚™ä»»å‹™å®Œäº†"
say "ğŸ“ æœ€çµ‚ä½ç½®: (" + bot_x + ", " + bot_y + ", " + bot_z + ")"